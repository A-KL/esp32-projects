[env:ESP32-S3-ST7789]
platform = espressif32@6.12.0
framework = arduino
board = esp32-s3-devkitc-1
board_upload.flash_size = 4MB
board_upload.maximum_size = 4194304
board_build.partitions = huge_app.csv
board_build.extra_flags = -DBOARD_HAS_PSRAM
board_build.filesystem = littlefs

monitor_speed = 115200
monitor_filters = 
	time
	default
	esp32_exception_decoder

lib_deps = 
	${env.lib_deps}
	bodmer/TFT_eSPI@^2.5.33
	MattFryer/Smoothed
	; https://github.com/lovyan03/LovyanGFX.git#develop
	../../lib/AudioToolsEx
	SPI
	FS
	SPIFFS

build_unflags = 
	-fno-exceptions

build_flags = 
	${env.build_flags}
  -D ARDUINO_USB_CDC_ON_BOOT=1
	-D ARDUINO_USB_MODE=1
	; -D CORE_DEBUG_LEVEL=4
; TFT_eSPI
	; -D LGFX_BACKEND=1
	-D TFT_eSPI_BACKEND=1
	-DUSER_SETUP_LOADED
	-DUSE_HSPI_PORT
	-DST7789_DRIVER
	-D TFT_RGB_ORDER=TFT_BGR
	-D TFT_HEIGHT=320
	-D TFT_WIDTH=240
	-D TFT_ROTATE=3
	-D TFT_MISO=-1
	-D TFT_MOSI=38
	-D TFT_SCLK=37
	-D TFT_CS=41
	-D TFT_DC=40
	-D TFT_RST=39
	-DLOAD_GLCD
	-DLOAD_FONT2
	-DLOAD_FONT4
	-DLOAD_FONT6
	-DLOAD_FONT8
	-DLOAD_GFXFF
	-DSMOOTH_FONT
	-D SPI_FREQUENCY=27000000
	-D SPI_READ_FREQUENCY=16000000
; I2S
	-D I2S_WS=48
	-D I2S_BCK=47
	-D I2S_SDI=35
	-D I2S_SDO=36
	
	-D I2S_BCK_2=46
	-D I2S_WS_2=45
; MICs
	-D I2S_BPS=32
	-D I2S_CHANNELS=2
	-D I2S_SAMPLE_RATE=48000
	-D AUDIO_VU_RATIO=0.01