[env:ESP32-S3-SM-ST7789P3]
platform = espressif32@6.12.0
framework = arduino
board = esp32-s3-devkitc-1
board_upload.flash_size = 4MB
board_upload.maximum_size = 4194304
board_build.partitions = huge_app.csv
board_build.extra_flags = -DBOARD_HAS_PSRAM
board_build.filesystem = littlefs

monitor_speed = 115200
monitor_filters = 
	time
	default
	esp32_exception_decoder

lib_deps = 
	${env.lib_deps}
	; https://github.com/lovyan03/LovyanGFX.git#develop
	bodmer/TFT_eSPI@^2.5.33
	MattFryer/Smoothed
	SPI
	FS
	SPIFFS

build_unflags = 
	-fno-exceptions

build_flags = 
	${env.build_flags}
	-DBOARD_HAS_PSRAM
  -D ARDUINO_USB_CDC_ON_BOOT=1
	-D ARDUINO_USB_MODE=1
	-D CORE_DEBUG_LEVEL=5
; TFT_eSPI
	; -D LGFX_BACKEND=1
	-D TFT_eSPI_BACKEND=1

	-D USER_SETUP_LOADED=1
		-D USE_HSPI_PORT=1
		-D ST7789_DRIVER=1
		-DCGRAM_OFFSET
		-D TFT_ROTATION=1
		-D TFT_HEIGHT=284
		-D TFT_WIDTH=76
		-D TFT_SPI_MODE=SPI_MODE3
		-DTFT_INVERSION_OFF
		-D TFT_RGB_ORDER=TFT_BGR
	-D TFT_SCLK=8
	-D TFT_MOSI=9
	-D TFT_MISO=7
	-D TFT_RST=10
	-D TFT_DC=11
	-D TFT_CS=12
	-D TFT_BL=13
	-D TFT_BACKLIGHT_ON=LOW

	-DLOAD_GLCD
	-DLOAD_FONT2
	-DLOAD_FONT4
	-DLOAD_FONT6
	-DLOAD_FONT8
	; -DLOAD_GFXFF
	-DSMOOTH_FONT

	-D SPI_FREQUENCY=27000000
	-D SPI_READ_FREQUENCY=16000000
; I2S
	-D I2S_WS=4
	-D I2S_SDO=5
	-D I2S_BCK=3
	-D I2S_SDI=2
; MICs
	-D I2S_BPS=16
	-D I2S_CHANNELS=2
	-D I2S_SAMPLE_RATE=44100
	-D AUDIO_VU_RATIO=0.01